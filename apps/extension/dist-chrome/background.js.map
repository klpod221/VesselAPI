{
  "version": 3,
  "sources": ["../src/background/service-worker.ts"],
  "sourcesContent": ["/// <reference types=\"chrome\" />\n\ninterface RequestPayload {\n  url: string;\n  method: string;\n  headers: Record<string, string>;\n  body?: string;\n  timeout?: number;\n}\n\n// Listen for messages from content script or external web pages\nchrome.runtime.onMessage.addListener((message, sender, sendResponse) => {\n  if (message.type === 'VESSEL_API_REQUEST') {\n    handleRequest(message.payload)\n      .then(sendResponse)\n      .catch((err) => sendResponse({\n        success: false,\n        error: String(err),\n      }));\n    return true; // Keep channel open for async response\n  }\n});\n\n// Also listen for external messages (from the web app directly if configured)\nchrome.runtime.onMessageExternal.addListener((message, sender, sendResponse) => {\n  if (message.type === 'VESSEL_API_PING') {\n    sendResponse({ type: 'VESSEL_API_PONG', checkId: message.checkId });\n    return false;\n  }\n  \n  if (message.type === 'VESSEL_API_REQUEST') {\n    handleRequest(message.payload)\n      .then(sendResponse)\n      .catch((err) => sendResponse({\n        success: false,\n        error: String(err),\n      }));\n    return true;\n  }\n});\n\nasync function handleRequest(\n  config: RequestPayload\n): Promise<{ success: boolean; response?: unknown; error?: string }> {\n  const startTime = performance.now();\n\n  try {\n    const controller = new AbortController();\n    const timeoutId = setTimeout(\n      () => controller.abort(),\n      config.timeout ?? 30000\n    );\n\n    const response = await fetch(config.url, {\n      method: config.method,\n      headers: config.headers,\n      body: config.body,\n      signal: controller.signal,\n    });\n\n    clearTimeout(timeoutId);\n\n    const firstByteTime = performance.now() - startTime;\n    const body = await response.text();\n    const totalTime = performance.now() - startTime;\n\n    const headers: Record<string, string> = {};\n    response.headers.forEach((value, key) => {\n      headers[key] = value;\n    });\n\n    return {\n      success: true,\n      response: {\n        status: response.status,\n        statusText: response.statusText,\n        headers,\n        body,\n        timing: {\n          firstByte: Math.round(firstByteTime),\n          total: Math.round(totalTime),\n        },\n        size: {\n          headers: JSON.stringify(headers).length,\n          body: body.length,\n        },\n      },\n    };\n  } catch (err) {\n    return {\n      success: false,\n      error: err instanceof Error ? err.message : String(err),\n    };\n  }\n}\n"],
  "mappings": ";;;AAWA,SAAO,QAAQ,UAAU,YAAY,CAAC,SAAS,QAAQ,iBAAiB;AACtE,QAAI,QAAQ,SAAS,sBAAsB;AACzC,oBAAc,QAAQ,OAAO,EAC1B,KAAK,YAAY,EACjB,MAAM,CAAC,QAAQ,aAAa;AAAA,QAC3B,SAAS;AAAA,QACT,OAAO,OAAO,GAAG;AAAA,MACnB,CAAC,CAAC;AACJ,aAAO;AAAA,IACT;AAAA,EACF,CAAC;AAGD,SAAO,QAAQ,kBAAkB,YAAY,CAAC,SAAS,QAAQ,iBAAiB;AAC9E,QAAI,QAAQ,SAAS,mBAAmB;AACtC,mBAAa,EAAE,MAAM,mBAAmB,SAAS,QAAQ,QAAQ,CAAC;AAClE,aAAO;AAAA,IACT;AAEA,QAAI,QAAQ,SAAS,sBAAsB;AACzC,oBAAc,QAAQ,OAAO,EAC1B,KAAK,YAAY,EACjB,MAAM,CAAC,QAAQ,aAAa;AAAA,QAC3B,SAAS;AAAA,QACT,OAAO,OAAO,GAAG;AAAA,MACnB,CAAC,CAAC;AACJ,aAAO;AAAA,IACT;AAAA,EACF,CAAC;AAED,iBAAe,cACb,QACmE;AACnE,UAAM,YAAY,YAAY,IAAI;AAElC,QAAI;AACF,YAAM,aAAa,IAAI,gBAAgB;AACvC,YAAM,YAAY;AAAA,QAChB,MAAM,WAAW,MAAM;AAAA,QACvB,OAAO,WAAW;AAAA,MACpB;AAEA,YAAM,WAAW,MAAM,MAAM,OAAO,KAAK;AAAA,QACvC,QAAQ,OAAO;AAAA,QACf,SAAS,OAAO;AAAA,QAChB,MAAM,OAAO;AAAA,QACb,QAAQ,WAAW;AAAA,MACrB,CAAC;AAED,mBAAa,SAAS;AAEtB,YAAM,gBAAgB,YAAY,IAAI,IAAI;AAC1C,YAAM,OAAO,MAAM,SAAS,KAAK;AACjC,YAAM,YAAY,YAAY,IAAI,IAAI;AAEtC,YAAM,UAAkC,CAAC;AACzC,eAAS,QAAQ,QAAQ,CAAC,OAAO,QAAQ;AACvC,gBAAQ,GAAG,IAAI;AAAA,MACjB,CAAC;AAED,aAAO;AAAA,QACL,SAAS;AAAA,QACT,UAAU;AAAA,UACR,QAAQ,SAAS;AAAA,UACjB,YAAY,SAAS;AAAA,UACrB;AAAA,UACA;AAAA,UACA,QAAQ;AAAA,YACN,WAAW,KAAK,MAAM,aAAa;AAAA,YACnC,OAAO,KAAK,MAAM,SAAS;AAAA,UAC7B;AAAA,UACA,MAAM;AAAA,YACJ,SAAS,KAAK,UAAU,OAAO,EAAE;AAAA,YACjC,MAAM,KAAK;AAAA,UACb;AAAA,QACF;AAAA,MACF;AAAA,IACF,SAAS,KAAK;AACZ,aAAO;AAAA,QACL,SAAS;AAAA,QACT,OAAO,eAAe,QAAQ,IAAI,UAAU,OAAO,GAAG;AAAA,MACxD;AAAA,IACF;AAAA,EACF;",
  "names": []
}
